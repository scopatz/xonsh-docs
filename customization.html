

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Customizing xonsh &#8212; xonsh 0.5.12 documentation</title>
    
    <link rel="stylesheet" href="_static/numpy_friendly.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/cloud.js"></script>
    <link rel="shortcut icon" href="_static/magic_conch.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Windows Guide" href="windows.html" />
     
        <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="http://xon.sh/customization.html"/>

  </head>
  <body role="document">
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="windows.html" title="Windows Guide"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">xonsh 0.5.12 documentation</a> &#187;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="customizing-xonsh">
<h1>Customizing <code class="docutils literal"><span class="pre">xonsh</span></code><a class="headerlink" href="#customizing-xonsh" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#how-do-i" id="id1">How do I...</a><ul>
<li><a class="reference internal" href="#change-the-current-color-theme" id="id2">...change the current color theme?</a></li>
<li><a class="reference internal" href="#import-python-modules-from-a-local-directory" id="id3">...import python modules from a local directory?</a></li>
<li><a class="reference internal" href="#set-xonsh-as-my-default-shell" id="id4">...set <code class="docutils literal"><span class="pre">xonsh</span></code> as my default shell?</a></li>
<li><a class="reference internal" href="#select-a-tab-completion-result-without-executing-the-current-line" id="id5">...select a tab completion result without executing the current line?</a></li>
<li><a class="reference internal" href="#add-a-default-argument-to-a-builtin-xonsh-alias" id="id6">...add a default argument to a builtin <code class="docutils literal"><span class="pre">xonsh</span></code> alias?</a></li>
<li><a class="reference internal" href="#make-terminal-tabs-start-in-the-correct-directory" id="id7">...make terminal tabs start in the correct directory?</a></li>
<li><a class="reference internal" href="#set-up-the-open-terminal-here-action-in-thunar" id="id8">...set up the &#8220;Open Terminal Here&#8221; action in Thunar?</a></li>
<li><a class="reference internal" href="#use-utf-8-characters-in-xonsh" id="id9">...use utf-8 characters in xonsh?</a></li>
<li><a class="reference internal" href="#fix-a-libgcc-s-so-1-error" id="id10">...fix a <code class="docutils literal"><span class="pre">libgcc_s.so.1</span></code> error?</a></li>
<li><a class="reference internal" href="#color-my-man-pages" id="id11">...color my man pages?</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-do-i">
<h2><a class="toc-backref" href="#id1">How do I...</a><a class="headerlink" href="#how-do-i" title="Permalink to this headline">¶</a></h2>
<div class="section" id="change-the-current-color-theme">
<span id="change-theme"></span><h3><a class="toc-backref" href="#id2">...change the current color theme?</a><a class="headerlink" href="#change-the-current-color-theme" title="Permalink to this headline">¶</a></h3>
<p>You can view the available styles by typing</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> xonfig styles
</pre></div>
</div>
<p>For a quick peek at the theme&#8217;s colors you can do</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> xonfig colors &lt;theme name&gt;
</pre></div>
</div>
<p>To set a new theme, do</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">$XONSH_COLOR_STYLE</span><span class="o">=</span><span class="s1">&#39;&lt;theme name&gt;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="import-python-modules-from-a-local-directory">
<span id="import-local-modules"></span><h3><a class="toc-backref" href="#id3">...import python modules from a local directory?</a><a class="headerlink" href="#import-python-modules-from-a-local-directory" title="Permalink to this headline">¶</a></h3>
<p>The modules available for import in a given <code class="docutils literal"><span class="pre">xonsh</span></code> session depend on what&#8217;s
available in <code class="docutils literal"><span class="pre">sys.path</span></code>. If you want to be able to import a module that
resides in the current directory, ensure that there is an empty string as the
first element of your <code class="docutils literal"><span class="pre">sys.path</span></code></p>
<div class="highlight-xonshcon"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="kn">import</span> <span class="nn">sys</span><span class="go"></span>
<span class="go">$ sys.path.insert(0, &#39;&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="set-xonsh-as-my-default-shell">
<span id="default-shell"></span><h3><a class="toc-backref" href="#id4">...set <code class="docutils literal"><span class="pre">xonsh</span></code> as my default shell?</a><a class="headerlink" href="#set-xonsh-as-my-default-shell" title="Permalink to this headline">¶</a></h3>
<p>If you want to use xonsh as your default shell, you will first have
to add xonsh to <code class="docutils literal"><span class="pre">/etc/shells</span></code>.</p>
<p>First ensure that xonsh is on your <code class="docutils literal"><span class="pre">$PATH</span></code></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> which xonsh
</pre></div>
</div>
<p>Then, as root, add xonsh to the shell list</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> which xonsh &gt;&gt; /etc/shells
</pre></div>
</div>
<p>To change shells, run</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> chsh -s <span class="k">$(</span>which xonsh<span class="k">)</span>
</pre></div>
</div>
<p>You will have to log out and log back in before the changes take effect.</p>
</div>
<div class="section" id="select-a-tab-completion-result-without-executing-the-current-line">
<span id="select-completion-result"></span><h3><a class="toc-backref" href="#id5">...select a tab completion result without executing the current line?</a><a class="headerlink" href="#select-a-tab-completion-result-without-executing-the-current-line" title="Permalink to this headline">¶</a></h3>
<p>In the <code class="docutils literal"><span class="pre">prompt_toolkit</span></code> shell, you can cycle through possible tab-completion
results using the TAB key and use ENTER to select the completion you want. By
default, ENTER will also execute the current line. If you would prefer to not
automatically execute the line (say, if you&#8217;re constructing a long pathname),
you can set</p>
<div class="highlight-xonshcon"><div class="highlight"><pre><span></span><span class="nv">$COMPLETIONS_CONFIRM</span><span class="o">=</span><span class="bp">True</span><span class="go"></span>
</pre></div>
</div>
<p>in your <code class="docutils literal"><span class="pre">xonshrc</span></code></p>
</div>
<div class="section" id="add-a-default-argument-to-a-builtin-xonsh-alias">
<span id="add-args-builtin-alias"></span><h3><a class="toc-backref" href="#id6">...add a default argument to a builtin <code class="docutils literal"><span class="pre">xonsh</span></code> alias?</a><a class="headerlink" href="#add-a-default-argument-to-a-builtin-xonsh-alias" title="Permalink to this headline">¶</a></h3>
<p>If you want to add a default argument to a builtin alias like <code class="docutils literal"><span class="pre">dirs</span></code> the
standard alias definition method will fail. In order to handle this case you can
use the following solution in your <code class="docutils literal"><span class="pre">xonshrc</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xonsh.dirstack</span> <span class="kn">import</span> <span class="n">dirs</span>

<span class="k">def</span> <span class="nf">_verbose_dirs</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">dirs</span><span class="p">([</span><span class="s1">&#39;-v&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">args</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">stdin</span><span class="p">)</span>

<span class="n">aliases</span><span class="p">[</span><span class="s1">&#39;dirs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_verbose_dirs</span>
</pre></div>
</div>
</div>
<div class="section" id="make-terminal-tabs-start-in-the-correct-directory">
<span id="terminal-tabs"></span><h3><a class="toc-backref" href="#id7">...make terminal tabs start in the correct directory?</a><a class="headerlink" href="#make-terminal-tabs-start-in-the-correct-directory" title="Permalink to this headline">¶</a></h3>
<p>If you use Gnome Terminal or another VTE terminal and it doesn&#8217;t start new tabs
in the CWD of the original TAB, this is because of a custom VTE interface. To
fix this, please add <code class="docutils literal"><span class="pre">{vte_new_tab_cwd}</span></code> somewhere to you prompt:</p>
<div class="highlight-xonsh"><div class="highlight"><pre><span></span><span class="nv">$PROMPT</span> <span class="o">=</span> <span class="s1">&#39;{vte_new_tab_cwd}&#39;</span> <span class="o">+</span> <span class="nv">$PROMPT</span>
</pre></div>
</div>
<p>This will issue the proper escape sequence to the terminal without otherwise
affecting the displayed prompt.</p>
</div>
<div class="section" id="set-up-the-open-terminal-here-action-in-thunar">
<span id="open-terminal-here"></span><h3><a class="toc-backref" href="#id8">...set up the &#8220;Open Terminal Here&#8221; action in Thunar?</a><a class="headerlink" href="#set-up-the-open-terminal-here-action-in-thunar" title="Permalink to this headline">¶</a></h3>
<p>If you use Thunar and &#8220;Open Terminal Here&#8221; action does not work,
you can try to replace a command for this action by the following:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>exo-open --working-directory %f --launch TerminalEmulator xonsh --shell-type<span class="o">=</span>best
</pre></div>
</div>
<p>In order to do this, go to <code class="docutils literal"><span class="pre">Edit</span> <span class="pre">&gt;</span> <span class="pre">Configure</span> <span class="pre">custom</span> <span class="pre">actions...</span></code>,
then choose <code class="docutils literal"><span class="pre">Open</span> <span class="pre">Terminal</span> <span class="pre">Here</span></code> and click on <code class="docutils literal"><span class="pre">Edit</span> <span class="pre">currently</span> <span class="pre">selected</span> <span class="pre">action</span></code> button.</p>
</div>
<div class="section" id="use-utf-8-characters-in-xonsh">
<span id="unicode-troubles"></span><h3><a class="toc-backref" href="#id9">...use utf-8 characters in xonsh?</a><a class="headerlink" href="#use-utf-8-characters-in-xonsh" title="Permalink to this headline">¶</a></h3>
<p>If you are unable to use utf-8 (ie. non-ascii) characters in xonsh. For example if you get the following output</p>
<div class="highlight-xonsh"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;ßðđ&quot;</span>

<span class="n">xonsh</span><span class="p">:</span> <span class="n">For</span> <span class="n">full</span> <span class="n">traceback</span> <span class="nb">set</span><span class="p">:</span> <span class="nv">$XONSH_SHOW_TRACEBACK</span> <span class="o">=</span> <span class="bp">True</span>
<span class="ne">UnicodeEncodeError</span><span class="p">:</span> <span class="s1">&#39;ascii&#39;</span> <span class="n">codec</span> <span class="n">can</span><span class="s1">&#39;t encode characters in position 0-2: ordinal not in range(128)</span>
</pre></div>
</div>
<p>The problem might be:</p>
<ul class="simple">
<li>Your locale is not set to utf-8, to check this you can set the content of the
environment variable <code class="docutils literal"><span class="pre">LC_TYPE</span></code></li>
<li>Your locale is correctly set but <strong>after</strong> xonsh started. This is typically
the case if you set your <code class="docutils literal"><span class="pre">LC_TYPE</span></code> inside your <code class="docutils literal"><span class="pre">.xonshrc</span></code> and xonsh is
your default/login shell. To fix this you should see the documentation of your
operating system to know how to correctly setup environment variables before
the shell start (<code class="docutils literal"><span class="pre">~/.pam_environment</span></code> for example)</li>
</ul>
</div>
<div class="section" id="fix-a-libgcc-s-so-1-error">
<span id="fix-libgcc-core-dump"></span><h3><a class="toc-backref" href="#id10">...fix a <code class="docutils literal"><span class="pre">libgcc_s.so.1</span></code> error?</a><a class="headerlink" href="#fix-a-libgcc-s-so-1-error" title="Permalink to this headline">¶</a></h3>
<p>On certain flavors of Linux you may periodically encounter this error message
when starting <code class="docutils literal"><span class="pre">xonsh</span></code>:</p>
<div class="highlight-xonshcon"><div class="highlight"><pre><span></span><span class="n">libgcc_s</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="mi">1</span> <span class="n">must</span> <span class="n">be</span> <span class="n">installed</span> <span class="k">for</span> <span class="n">pthread_cancel</span> <span class="n">to</span> <span class="n">work</span><span class="go"></span>
<span class="go">Aborted (core dumped)</span>
</pre></div>
</div>
<p>This is due to an upstream Python problem and can be fixed by setting
<code class="docutils literal"><span class="pre">LD_PRELOAD</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ env <span class="nv">LD_PRELOAD</span><span class="o">=</span>libgcc_s.so.1 xonsh
</pre></div>
</div>
</div>
<div class="section" id="color-my-man-pages">
<h3><a class="toc-backref" href="#id11">...color my man pages?</a><a class="headerlink" href="#color-my-man-pages" title="Permalink to this headline">¶</a></h3>
<p>You can add add <a class="reference external" href="https://wiki.archlinux.org/index.php/Color_output_in_console#less">man page color support</a> using <code class="docutils literal"><span class="pre">less</span></code> environment
variables:</p>
<div class="highlight-xonsh"><div class="highlight"><pre><span></span><span class="c1"># Coloured man page support</span>
<span class="c1"># using &#39;less&#39; env vars (format is &#39;\E[&lt;brightness&gt;;&lt;colour&gt;m&#39;)</span>
<span class="nv">$LESS_TERMCAP_mb</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[01;31m&quot;</span>     <span class="c1"># begin blinking</span>
<span class="nv">$LESS_TERMCAP_md</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[01;31m&quot;</span>     <span class="c1"># begin bold</span>
<span class="nv">$LESS_TERMCAP_me</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[0m&quot;</span>         <span class="c1"># end mode</span>
<span class="nv">$LESS_TERMCAP_so</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[01;44;36m&quot;</span>  <span class="c1"># begin standout-mode (bottom of screen)</span>
<span class="nv">$LESS_TERMCAP_se</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[0m&quot;</span>         <span class="c1"># end standout-mode</span>
<span class="nv">$LESS_TERMCAP_us</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[00;36m&quot;</span>     <span class="c1"># begin underline</span>
<span class="nv">$LESS_TERMCAP_ue</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[0m&quot;</span>         <span class="c1"># end underline</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/ascii_conch_part_color_tight.png" alt="Logo"/>
        </a></p><div class="sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Customizing <code class="docutils literal"><span class="pre">xonsh</span></code></a><ul>
<li><a class="reference internal" href="#how-do-i">How do I...</a><ul>
<li><a class="reference internal" href="#change-the-current-color-theme">...change the current color theme?</a></li>
<li><a class="reference internal" href="#import-python-modules-from-a-local-directory">...import python modules from a local directory?</a></li>
<li><a class="reference internal" href="#set-xonsh-as-my-default-shell">...set <code class="docutils literal"><span class="pre">xonsh</span></code> as my default shell?</a></li>
<li><a class="reference internal" href="#select-a-tab-completion-result-without-executing-the-current-line">...select a tab completion result without executing the current line?</a></li>
<li><a class="reference internal" href="#add-a-default-argument-to-a-builtin-xonsh-alias">...add a default argument to a builtin <code class="docutils literal"><span class="pre">xonsh</span></code> alias?</a></li>
<li><a class="reference internal" href="#make-terminal-tabs-start-in-the-correct-directory">...make terminal tabs start in the correct directory?</a></li>
<li><a class="reference internal" href="#set-up-the-open-terminal-here-action-in-thunar">...set up the &#8220;Open Terminal Here&#8221; action in Thunar?</a></li>
<li><a class="reference internal" href="#use-utf-8-characters-in-xonsh">...use utf-8 characters in xonsh?</a></li>
<li><a class="reference internal" href="#fix-a-libgcc-s-so-1-error">...fix a <code class="docutils literal"><span class="pre">libgcc_s.so.1</span></code> error?</a></li>
<li><a class="reference internal" href="#color-my-man-pages">...color my man pages?</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="windows.html"
                          title="Previous page">&larr; Windows Guide</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="tutorial.html"
                          title="Next page">&rarr; Tutorial</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/customization.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="windows.html" title="Windows Guide"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">xonsh 0.5.12 documentation</a> &#187;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Anthony Scopatz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>